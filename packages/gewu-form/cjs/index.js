var X=Object.create;var h=Object.defineProperty,G=Object.defineProperties,K=Object.getOwnPropertyDescriptor,Q=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,ee=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var V=(e,r,t)=>r in e?h(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,c=(e,r)=>{for(var t in r||(r={}))b.call(r,t)&&V(e,t,r[t]);if(x)for(var t of x(r))j.call(r,t)&&V(e,t,r[t]);return e},R=(e,r)=>G(e,Q(r));var O=(e,r)=>{var t={};for(var o in e)b.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&x)for(var o of x(e))r.indexOf(o)<0&&j.call(e,o)&&(t[o]=e[o]);return t};var re=(e,r)=>{for(var t in r)h(e,t,{get:r[t],enumerable:!0})},B=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of W(r))!b.call(e,n)&&n!==t&&h(e,n,{get:()=>r[n],enumerable:!(o=K(r,n))||o.enumerable});return e};var te=(e,r,t)=>(t=e!=null?X(ee(e)):{},B(r||!e||!e.__esModule?h(t,"default",{value:e,enumerable:!0}):t,e)),oe=e=>B(h({},"__esModule",{value:!0}),e);var m=(e,r,t)=>new Promise((o,n)=>{var i=a=>{try{f(t.next(a))}catch(u){n(u)}},s=a=>{try{f(t.throw(a))}catch(u){n(u)}},f=a=>a.done?o(a.value):Promise.resolve(a.value).then(i,s);f((t=t.apply(e,r)).next())});var Te={};re(Te,{ErrorMessage:()=>ce,Field:()=>pe,FieldHOC:()=>ye,LessForm:()=>me,setZodI18n:()=>ge,useField:()=>d,useFieldByContext:()=>I,useForm:()=>he});module.exports=oe(Te);var l=te(require("react"));function E(e){let r=e.issues[0];typeof window!="undefined"&&console.error("[gewu-http] error issue:",r);let t=r.message;p.i18n[t]&&(t=p.i18n[t]);let o=new Error(t);return o.path=r.path[0],o}function ne(e,r){try{return e.parse(r)}catch(t){throw E(t)}}function se(e,r,t){try{let o={[r]:t[r]};return e.pick({[r]:!0}).parse(o)}catch(o){throw E(o)}}var p={parse:ne,pickParse:se,i18n:{},errorFlat:E};var y=require("react");var ie=typeof Element!="undefined",ae=typeof Map=="function",fe=typeof Set=="function",le=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function F(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;let t,o,n;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(o=t;o--!==0;)if(!F(e[o],r[o]))return!1;return!0}let i;if(ae&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(i=e.entries();!(o=i.next()).done;)if(!r.has(o.value[0]))return!1;for(i=e.entries();!(o=i.next()).done;)if(!F(o.value[1],r.get(o.value[0])))return!1;return!0}if(fe&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(i=e.entries();!(o=i.next()).done;)if(!r.has(o.value[0]))return!1;return!0}if(le&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(t=e.length,t!=r.length)return!1;for(o=t;o--!==0;)if(e[o]!==r[o])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(n=Object.keys(e),t=n.length,t!==Object.keys(r).length)return!1;for(o=t;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[o]))return!1;if(ie&&e instanceof Element)return!1;for(o=t;o--!==0;)if(!((n[o]==="_owner"||n[o]==="__v"||n[o]==="__o")&&e.$$typeof)&&!F(e[n[o]],r[n[o]]))return!1;return!0}return e!==e&&r!==r}function L(e,r){try{return F(e,r)}catch(t){if((t.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw t}}function z(e,r){let[t,o]=(0,y.useState)(e.val),n=(0,y.useRef)(r(e.val));return(0,y.useEffect)(()=>{let i=()=>{let s=r(e.val),f=!L(s,n.current);n.current=s,f&&o(c({},e.val))};return e.subscribs.add(i),()=>{e.subscribs.delete(i)}},[]),t}function N(e){let r=new Set,t={subscribs:r,next:o=>{o?Promise.resolve(o(t.val)).then(()=>{r.forEach(n=>n())}):r.forEach(n=>n())},val:e};return t}var S=require("react");function g(e,r){if(typeof r!="string")return;let t=r.split("."),o=e,n=t.length;try{for(let i=0;i<n;i++){let s=t[i];if(i<n-1)if(Array.isArray(o))if(/=/.test(s)){let[f,a]=s.split("=");o=o.find(u=>u[f]==a)}else isNaN(Number(s))||(o=o[Number(s)]);else o=o[s];else return o[s]}}catch(i){return}}function M(e,r,t){if(typeof r!="string")return;let o=r.split("."),n=e,i=o.length;try{for(let s=0;s<i;s++){let f=o[s];if(s<i-1)if(Array.isArray(n))if(/=/.test(f)){let[a,u]=f.split("=");n=n.find(v=>v[a]==u)}else isNaN(Number(f))||(n=n[Number(f)]);else n=n[f];else n[f]=t}}catch(s){}}var _=require("react"),P=(0,_.createContext)(void 0);var Z={abortEarly:!1};function H(e){return!!e._blacklist}function Y(o,n){return m(this,arguments,function*(e,r,{key:t}={}){let i="",s="",f={};if(t)try{yield e.validateAt(t,r,Z)}catch(a){a&&a.errors&&a.errors[0]&&(f[t]=a.errors[0],s=t,i=a.errors[0])}else try{yield e.validate(r,Z)}catch(a){f[a.path]=a.errors[0],s=a.path,i=a.errors[0]}return{errors:f,error:i,path:s}})}function q(e){return!!(e.safeParseAsync&&e.safeParse)}function $(o,n){return m(this,arguments,function*(e,r,{key:t}={}){let i="",s="",f={};if(e.safeParse,t)try{p.pickParse(e,t,r)}catch(a){s=a.path,i=a.message}else try{p.parse(e,r)}catch(a){s=a.path,i=a.message}return{errors:f,error:i,path:s}})}function D(e,r){let t={};return Object.keys(e.touched).forEach(o=>{if(e.touched[o]){let n=r[o];n!==void 0&&(t[o]=n)}}),t}function T(t){return m(this,arguments,function*(e,r={}){if(e.validate){let o=yield Promise.resolve(e.validate(e.val,r.key));Object.assign(e.errors,D(e,o))}else if(e.validateSchema){let o=e.validateSchema,n;q(o)?n=yield $(o,e.val,c({},r)):H(o)&&(n=yield Y(o,e.val,c({},r))),r.key?e.errors[r.key]=n.error:e.errors=D(e,n.errors),n.error&&(e.error=n.error,e.errorPath=n.path)}e.next()})}var ue={name:"",value:"",error:"",onChange:e=>{},onBlur:e=>{}};function I(e,r,t){if(!e)return ue;let o=z(e,s=>t?t=="error"?[e.errors[r]]:[g(s,r)]:[g(s,r),e.errors[r]]);(0,S.useEffect)(()=>{let s=g(o,r);s!==void 0&&i.onChange(s)},[]);let n=g(o,r),i={name:r,value:n==null?"":n,error:typeof e.errors[r]=="undefined"?"":e.errors[r],onBlur:s=>{s.persist&&s.persist(),e.touched[r]||(e.touched[r]=!0,T(e,{first:!0,key:r}))},onChange:s=>{let f=typeof s,a;if(f==="undefined")a="";else if(f==="object"&&(s.currentTarget||s.target)){let u=s.currentTarget||s.target,v=u.type;if(v==="checkbox"||v==="radio")a=!!u.checked;else if(u.multiple){let w=u.options,A=[];for(let C=0,U=w.length;C<U;C++)w[C].selected&&A.push(w[C].value);a=A}else a=u.value}else a=s;M(e.val,r,a),e.handleChange&&(e.val=e.handleChange(e.val,r)),T(e,{first:!0,key:r}),e.touched[r]||e.next()}};return i}function d(e,r){let t=(0,S.useContext)(P);return I(t,e,r)}function ce({name:e}){let r=d(e,"error");return l.createElement(l.Fragment,null,r.error)}function pe({name:e,children:r,loadType:t}){let o=d(e,t);return r(o)}var J=require("react");function ye(e){return function(s){var f=s,{name:t,loadType:o,onChange:n}=f,i=O(f,["name","loadType","onChange"]);if(t){let a=d(t,o);return(0,J.useEffect)(()=>{n&&n(a.value)},[a.value]),l.createElement(e,c(c({},a),i))}return l.createElement(e,c({},i))}}var de=P.Provider;function me(n){var i=n,{children:e,onSubmit:r,value:t}=i,o=O(i,["children","onSubmit","value"]);return l.createElement(de,{value:t},l.createElement("form",c({onSubmit:s=>{s.preventDefault(),r&&r(s)}},o),e))}var k=require("react");function he({initialValues:e,validate:r,validateSchema:t,handleChange:o}){let n=(0,k.useRef)(N(e));return(0,k.useMemo)(()=>{let i=Object.keys(e),s={};return i.forEach(f=>{s[f]=!1}),n.current=R(c({},n.current),{validate:r,isValid:(f={})=>(T(n.current,f),n.current.error),errors:{},error:"",touched:s,validateSchema:t,handleChange:o}),n.current},[])}var ge=e=>{p.i18n=e};
